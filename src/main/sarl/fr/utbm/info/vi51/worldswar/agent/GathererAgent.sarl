/**
 * 
 */
package fr.utbm.info.vi51.worldswar.^agent

import fr.utbm.info.vi51.worldswar.^agent.^event.AgentInitializedEvent
import fr.utbm.info.vi51.worldswar.^agent.^event.InfluenceEvent
import fr.utbm.info.vi51.worldswar.^agent.^event.PerceptionEvent
import fr.utbm.info.vi51.worldswar.environment.influence.MoveInfluence
import fr.utbm.info.vi51.worldswar.utils.Direction
import io.sarl.core.DefaultContextInteractions
import io.sarl.core.Initialize
import io.sarl.core.Logging
import io.sarl.util.Scopes

/**
 * A gatherer tries to find food and bring it back to the anthill.
 */
agent GathererAgent extends AntAgent {
	uses DefaultContextInteractions, Logging
	
	on Initialize {
		synchronized(this) {
			emit(new AgentInitializedEvent)
		}
	}
	
	on PerceptionEvent {
		synchronized(this) {
			
			val perceptionGrid = occurrence.perceptionGrid
			//TODO implement a brain here, do something with perceptionGrid
			
			
			
			emit(new InfluenceEvent(this.getID(), new MoveInfluence(Direction.EAST)),
				Scopes.addresses(occurrence.callbackAddress))
		}
	}
}